# Krack8 Lighthouse

## Introduction

This chart bootstraps a Krack8 Lighthouse deployment on a Kubernetes cluster using the Helm package manager.

## Prerequisites

- Kubernetes 1.25+
- Helm 3.8.0+
- PV provisioner support in the underlying infrastructure
- ReadWriteOnce volumes for database (if database creation required)

## Installing the Chart

To adding the chart repository with the name `krack8`:

```
helm repo add krack8 https://krack8.github.io/helm-charts
```

The command pulls Krack8 charts on the Kubernetes cluster. 

> **Tip**: Verify the chart by running `helm search repo`

## Installation details

### Install lighthouse controller and agent

This chart allows you to install **Lighthouse Controller**, **Lighthouse Webapp** and **Lighthouse Agent** together with a single command 
by setting `controller.enabled` to `true` and `agent.enabled` to `true`.

> **Note:** The chart allows you to install only the **lighthouse controller** by setting `controller.enabled` to `true`. After the installation, you can add
> **Lighthouse Agents** from the webapp. 

To install the lighthouse chart with the release name `my-release`, use the following command:
```
helm install my-release krack8/lighthouse --create-namespace --namespace my-namespace --version 0.2.0 \
--set controller.enabled=true \
--set agent.enabled=true
```

> **Note:** Replace the `krack8` repository name if you have set any other name. You can also update the helm release name `my-release` and `my-namespace` if needed.

This command will first create the namespace if it does not already exist, and will deploy the following resources.
- **Lighthouse Controller** kubernetes resources including deployment, service, secret. Default container port for http server is `8080` and gRPC server is `50051`.
- **Lighthouse Webapp** kubernetes resources including deployment, service. Default container port is `8000`.
- **Lighthouse Agent** kubernetes resources including deployment, secret.
- **Lighthouse Mongo Database** kubernetes resources including deployment, service, secret. Default container port is `27017`.

> **Note:** 
>> By default, The controller container http server, grpc server and webapp runs on port `8080`, `50051` and `8000` respectively. You can update
>> these by setting `controller.service.targetPort`, `controller.grpc.targetPort` and `controller.webapp.service.targetPort` for http server, grpc server and webapp respectively.
>> You can also set values to `controller.service.port`, `controller.grpc.port` and `controller.webapp.service.port`. Their default values are `80`,`50051` and `80` respectively.
>
>> Applying the command won't provide you the access to the **Lighthouse Webapp** from the browser directly. You need to add ingress using additional parameters. 
>> 
>> Alternatively, you may connect the **Lighthouse Controller** and **Lighthouse Webapp** via port-forwarding by following the procedures below:
>> - Port forward **Lighthouse Controller** pod's container http port.
>> - Port forward **Lighthouse Webapp** pod's container http port.
>> - Update the **Lighthouse Controller's** api endpoint in configmap of **Lighthouse Webapp**. Make sure to restart the **Lighthouse Webapp** deployment after updating the configmap.
>
>> When installing the chart with `controller.enabled=true` and `agent.enabled=true`, 
> the **Lighthouse Controller** generates a secret (named containing `-agent-auth-secret` as suffix) in the same namespace. 
> This secret contains the authentication token required for the **Lighthouse Agent** to establish a connection with the **Lighthouse Controller**.

### Install Lighthouse agent

To install the **Lighthouse Agent**, the **Lighthouse Controller** must be pre-installed in one of your clusters. 
You can navigate to the **Lighthouse Webapp**, add a new cluster, and the system will generate a Helm command, 
which can then be executed on any of your Kubernetes clusters to deploy the agent.

#### Lighthouse Agent additional parameters

To install **Lighthouse Agent**, there are some additional parameters which you need to provide:

* `auth.token` - This token will be used to connect the **Lighthouse Agent** to **Lighthouse Controller**. You will get the value while adding a new cluster from the **Lighthouse Webapp**.
* `agent.group` - A group id which will be generated by the **Lighthouse Controller**. You will get the value while adding a new cluster from the **Lighthouse Webapp**.
* `config.controller.grpc.host` - The **Lighthouse Controller** grpc server host url for connecting the **Lighthouse Agent** to **Lighthouse Controller**. You will get the token from the **Lighthouse Webapp** while adding a new custer.
* `config.controller.grpc.tls.enabled` - If TLS is enabled for the grpc server **Lighthouse Controller** the value needs to be set to `True`, `False` otherwise. Default value is `False`.
* `config.controller.grpc.tls.skipVerification` - **Lighthouse Agent** by default tries to verify the TLS certificates for the **Lighthouse Controller** gRPC server. Default value is `True`. If you want to skip the verification, set the value to `False`.
* `config.controller.grpc.tls.ca` - The custom certificate authority for **Lighthouse Controller** gRPC TLS. If you have added certificates with a custom ca for the gRPC TLS connection, you need to provide the value.

> **Note**: Before applying the generated helm command the **Lighthouse Webapp**, you can add your changes to the release name, namespace, chart version and parameters.

### Lighthouse Default User

To access the lighthouse, you will require a default user. The **Lighthouse controller** creates a user with default
credentials. By default, a user is created using default username `admin@default.com` and with default password `lighthouse`. 

This chart allows you to modify the user credentials before installing the **Lighthouse Controller** by setting
values to `user.email` and `user.password`.

### Resource requests and limits

Krack8 charts allow setting cpu and memory resource `requests` and `limits` for all containers inside the chart deployment.

To specify resources for all deployments, the Krack8 Lighthouse chart supports the `global.resources` field. Setting this field applies resource limits and requests to all deployments in the chart. 

For more granular control, the chart also allows defining resource requests and limits for specific deployments individually. 
You can set resource values to `controller.resources`, `controller.webapp.resources` and `agent.resources` for adding controller, webapp and agent deployment resources respectively.

e.g.
```
helm install my-release krack8/lighthouse --create-namespace --namespace my-namespace \
--set controller.enabled=true \
--set controller.resources.requests.cpu="50m" \
--set controller.resources.requests.memory="128Mi"
```

### Database

Krack8 Lighthouse requires a database for storing metadata and cluster configurations. This chart allows you to integrate database. Currently, the lighthouse chart supports mongodb database integration. 
You can create a new mongo database using this chart or integrate existing mongo database. 

Installing The **Lighthouse Controller** with new database:

While installing the controller, the database creates database by default with the following parameters:
- `db.mongo.internal.enabled` - The chart creates a mongo database by default. Default value is `true`. If you don't want the chart to create the db by default, set it `false`.
- `db.mongo.internal.auth.username` - Root username for the database. If not provided, the database will be created using the default username.
- `db.mongo.internal.auth.password` - Root password for the database. If not provided, the database will be created using the default password.
- `db.mongo.internal.auth.databaseName` - The chart sets a default database name if not provided. Default database name is `lighthouse`.
- `db.mongo.internal.targetPort` - The chart sets a default port for the database. Default port is `27017`.

> **Note:** The database credentials are saved as a kubernetes secret in the namespace where database will be deployed.

This chart also allows you to add db storage configuration by setting values under `db.mongo.internal.persistence` section. You can set the following:
- `db.mongo.internal.persistence.size`: For setting the size of the persistent volume. Default value is "1Gi".
- `db.mongo.internal.persistence.storageClassName`: Set your cluster's storage class name.
- `db.mongo.internal.persistence.annotations`: You can set annotations for persistent volume.
- `db.mongo.internal.persistence.accessMode`: You can set accessMode for the persistent volume. Default value is "ReadWriteOnce"

Installing The **Lighthouse Controller** with an existing database:

If you have an existing mongodb, it is also possible to add that by setting `db.mongo.external.enabled` to `true`. Here are the parameters:
- `db.mongo.external.enabled` - For adding the existing database, need to set the value to `true`. Default value is `false`.
- `db.mongo.external.uri` - Need to provide the uri for the existing database. The format is `mongodb://<username>:<password>@<mongodb server address>:<mongo port>` (Replace the placeholders in the given format according to your configuration)
- `db.mongo.external.databaseName` - You can provide which database to use for the Lighthouse. Default database name is `lighthouse`. 

> **Note:** Make sure to disable the mongo creation while adding the existing database by setting `db.mongo.internal.enabled` to `false`.

### Ingress

The Krack8 lighthouse chart provides support for Ingress resources to enable external access. If an Ingress controller is installed in your cluster, such as **nginx-ingress-controller**, **HAProxy**, or any other Ingress controller, it can be utilized to route traffic. 
Ingress is used to expose both the **Lighthouse Controller** http and grpc server, and the **lighthouse webapp**.

To enable ingress, set `ingress.enabled` to `true` for the controller's HTTP Ingress and `ingressGrpc.enabled` to `true` for the controller's gRPC Ingress. 
If ingress is enabled, then you need add the hostnames as well. You can set hostname for http server ingress by setting `ingress.hostname` and for
grpc ingress by setting `ingressGrpc.hostname`.

> **Note:** If you set `ingress.enabled` to `true`, the chart will create an ingress that will route the traffic for both **Lighthouse Controller** and **Lighthouse Webapp** based on routes.

The chart also allows you to add additional parameters for both http server ingress and grpc ingress.
- `ingress.annotations` and `ingressGrpc.annotations`: For adding annotations depending on your ingress controller.
- `ingress.ingressClassName` and `ingressGrpc.ingressClassName`: For setting ingress class name based on your ingress controller.
- `ingress.pathType` and `ingressGrpc.pathType`: For setting ingress pathType. Default value is `ImplementationSpecific`.
- `ingress.apiVersion` and `ingressGrpc.apiVersion`: For setting ingress apiVersion depending on your cluster's supported ingress apiVersion. By default, the chart will set 
the apiVersion based on your cluster's configurations.

> **Important:**
>> The **Lighthouse Controller** opens a WebSocket server for real-time communication. If you're using an Ingress controller, 
>> you must add appropriate annotations in the `ingress.annotations` to ensure WebSocket connections are properly forwarded. For example, when using nginx-ingress-controller, you can use:
>> `nginx.org/websocket-services: lighthouse-controller`
>
>> To enable gRPC communication, you must also add the correct gRPC annotation depending on your ingress controller in the `ingressGrpc.annotations`. For nginx, use:
>> `nginx.ingress.kubernetes.io/backend-protocol: "GRPC"`

e.g.
```
helm install my-release krack8/lighthouse --create-namespace --namespace my-namespace \
--set controller.enabled=true \
--set ingress.enabled=true \
--set ingress.hostname=xyz.com \
--set ingress.ingressClassName=nginx \
--set ingress.annotations."nginx\.org/websocket-services"="lighthouse-controller" \
--set ingressGrpc.enabled=true \
--set ingressGrpc.ingressClassName=nginx \
--set ingressGrpc.hostname=grpc.xyz.com \
--set ingressGrpc.annotations."nginx\.ingress\.kubernetes\.io/backend-protocol"="GRPC"
```

> **Note:** The command is an example of adding ingress for **Lighthouse Controller's** http and gRPC server. The above annotations is for nginx-ingress-controller. 
> Before applying the command, replace the hostname, ingressClassName and annotations according to your cluster configuration.

### Securing traffic using TLS

TLS support is also available for securing Ingress traffic. To enable TLS , set `ingress.tls.enabled` to `true` and `ingressGrpc.enabled` to `true` for http ingress and grpc ingress respectively. 
If TLS is enabled, it is mandatory to provide the certificate, certificate private key and certificate authority (if custom ca).

The chart allows you to provide a secret name consisting of certificate (`tls.crt`), certificate key (`tls.key`), and certificate authority (`ca.crt`) if necessary. You can set the secret name for ingress by setting value 
to `ingress.tls.secretName` and `ingressGrpc.tls.secretName`.

> **Note:** 
>> Make sure the secret exists in the same namespace where you want to install the **Lighthouse Controller**. 
>
>> If you are using **cert-manager**, you can set a secret name and add cert manager annotations to `ingress.annotations` and `ingressGrpc.annotations`. The cert manager will create the secret for you and store 
> the certificate inside the secret.

The chart also allows you to add certificates directly instead of providing secret name. 
- `ingress.tls.crt` and `ingressGrpc.tls.crt`: Your certificate for the ingress host. e.g. 
```
--set ingress.tls.crt="-----BEGIN CERTIFICATE-----
MIIFATCCA+mgAwIBAgISBK65Pjc/MdGCizcwmq40d+sNMA0GCSqGSIb3DQEBCwUA
...
GXL9vAUEFuvHCyoc7I+Y18ekpPPPFBQuTdxHA2UfZMwBRYTFHQ==
-----END CERTIFICATE-----"
```
- `ingress.tls.key` and `ingressGrpc.tls.key`: Your certificate private key for the ingress host. e.g.
```
--set ingress.tls.key="-----BEGIN RSA PRIVATE KEY-----
MIIEogIBAAKCAQEAuvXBcqLD3LkqN6zTWovgJZ2WeZC21Zbnxb509n6iWSlq50G2
...
-----END RSA PRIVATE KEY-----"
```
- `ingress.tls.ca` and `ingressGrpc.tls.ca`: If you have a custom authority, you can add the certificate authority for the ingress host. e.g.
```
--set ingress.tls.ca="-----BEGIN CERTIFICATE-----
MIIFATCCA+mgAwIBAgISBK65Pjc/MdGCizcwmq40d+sNMA0GCSqGSIb3DQEBCwUA
...
-----END CERTIFICATE-----"
```

## Parameters

### Global parameters

| Name                      | Description                                                                          | Value                        |
|---------------------------|--------------------------------------------------------------------------------------|------------------------------|
| `global.runMode`          | Run mode for Lighthouse services (options: `PRODUCTION`, `DEVELOP`)                  | `"PRODUCTION"`               |
| `global.image.repository` | Global Docker image repository                                                       | `quay.io/klovercloud/krack8` |
| `global.image.pullPolicy` | Global Docker image pull policy                                                      | `IfNotPresent`               |
| `global.resources`        | Global resource (limit,request) section for containers inside Lighthouse deployments | `{}`                         |


### Common parameters

| Name               | Description                                                                       | Value |
|--------------------|-----------------------------------------------------------------------------------|-------|
| `kubeVersion`      | Override Kubernetes version                                                       | `""`  |
| `nameOverride`     | String to partially override lighthouse.fullname. Default value is the chart name | `""`  |
| `fullnameOverride` | String to fully override lighthouse.fullname. Default value is the chart name     | `""`  |
| `commonLabels`     | Labels to add to all deployed objects                                             | `{}`  |

### Lighthouse controller parameters

| Name                              | Description                                                                                          | Value         |
|-----------------------------------|------------------------------------------------------------------------------------------------------|---------------|
| `controller.enabled`              | Enable the lighthouse controller and webapp                                                          | `false`       |
| `controller.replicaCount`         | The number of lighthouse controller pods to run                                                      | `1`           |
| `controller.revisionHistoryLimit` | The number of lighthouse controller pod revision history limit                                       | `0`           |
| `controller.apiEndpoint`          | The lighthouse controller api endpoint for accessing the http server                                 | `""`          |
| `controller.resources`            | Set lighthouse controller's container requests and limits for different resources like CPU or memory | `{}`          |
| `controller.service.type`         | Lighthouse controller Kubernetes service type                                                        | `"ClusterIP"` |
| `controller.service.port`         | Lighthouse controller's Kubernetes service port                                                      | `80`          |
| `controller.service.targetPort`   | Lighthouse controller's deployment container port                                                    | `8080`        |
| `controller.grpc.port`            | Lighthouse controller's Kubernetes service port for gRPC server                                      | `50051`       |
| `controller.grpc.targetPort`      | Lighthouse controller's deployment container port for gRPC server                                    | `50051`       |
| `controller.image.repository`     | Lighthouse controller image repository                                                               | `""`          |
| `controller.image.pullPolicy`     | Lighthouse controller image pull policy                                                              | `""`          |
| `controller.image.tag`            | Lighthouse controller image tag                                                                      | `""`          |

### Lighthouse webapp parameters

| Name                                     | Description                                                                                      | Value         |
|------------------------------------------|--------------------------------------------------------------------------------------------------|---------------|
| `controller.webapp.replicaCount`         | The number of lighthouse webapp pods to run                                                      | `1`           |
| `controller.webapp.revisionHistoryLimit` | The number of lighthouse webapp pod revision history limit                                       | `0`           |
| `controller.webapp.resources`            | Set lighthouse webapp's container requests and limits for different resources like CPU or memory | `{}`          |
| `controller.webapp.service.type`         | Lighthouse webapp Kubernetes service type                                                        | `"ClusterIP"` |
| `controller.webapp.service.port`         | Lighthouse webapp's Kubernetes service port                                                      | `80`          |
| `controller.webapp.service.targetPort`   | Lighthouse webapp's deployment container port                                                    | `8000`        |
| `controller.webapp.image.repository`     | Lighthouse webapp image repository                                                               | `""`          |
| `controller.webapp.image.pullPolicy`     | Lighthouse webapp image pull policy                                                              | `""`          |
| `controller.webapp.image.tag`            | Lighthouse webapp image tag                                                                      | `""`          |

### Lighthouse agent parameters

| Name                         | Description                                                                                          | Value               |
|------------------------------|------------------------------------------------------------------------------------------------------|---------------------|
| `agent.enabled`              | Enable the lighthouse agent                                                                          | `false`             |
| `agent.replicaCount`         | The number of lighthouse webapp pods to run                                                          | `1`                 |
| `agent.revisionHistoryLimit` | The number of lighthouse agent pod revision history limit                                            | `0`                 |
| `agent.resources`            | Set lighthouse agent's container requests and limits for different resources like CPU or memory      | `{}`                |
| `agent.group`                | Lighthouse agent group name. Generated by the **Lighthouse Controller**                              | `""`                |
| `agent.defaultClusterName`   | The initial cluster name if **Lighthouse Controller** and **Lighthouse Agent** installed combinedly. | `"Default-cluster"` |
| `agent.service.port`         | Lighthouse agent's deployment container port                                                         | `8080`              |
| `agent.image.repository`     | Lighthouse agent image repository                                                                    | `""`                |
| `agent.image.pullPolicy`     | Lighthouse agent image pull policy                                                                   | `""`                |
| `agent.image.tag`            | Lighthouse agent image tag                                                                           | `""`                |


### Lighthouse database parameters

| Name                                             | Description                                                                 | Value             |
|--------------------------------------------------|-----------------------------------------------------------------------------|-------------------|
| `db.mongo.internal.enabled`                      | Enables the creation of lighthouse mongodb                                  | `true`            |
| `db.mongo.internal.replicaCount`                 | The number of lighthouse mongodb pods to run                                | `1`               |
| `db.mongo.internal.image.repository`             | Lighthouse mongodb image repository                                         | `"mongo"`         |
| `db.mongo.internal.image.pullPolicy`             | Lighthouse mongodb image pull policy                                        | `"IfNotPresent"`  |
| `db.mongo.internal.image.tag`                    | Lighthouse mongodb image tag                                                | `"7.0.16-jammy"`  |
| `db.mongo.internal.auth.username`                | Username of lighthouse mongodb root user                                    | `"root"`          |
| `db.mongo.internal.auth.password`                | Password of lighthouse mongodb root user                                    | `"mongo123!"`     |
| `db.mongo.internal.auth.databaseName`            | Database name for lighthouse                                                | `"lighthouse"`    |
| `db.mongo.internal.persistence.size`             | Database persistent volume size                                             | `"1Gi"`           |
| `db.mongo.internal.persistence.storageClassName` | Cluster storage class name for persistent volume                            | `""`              |
| `db.mongo.internal.persistence.annotations`      | Annotations for persistent volume                                           | `{}`              |
| `db.mongo.internal.persistence.accessMode`       | Access mode for persistent volume                                           | `"ReadWriteOnce"` |
| `db.mongo.internal.port`                         | Database Kubernetes service port                                            | `27017`           |
| `db.mongo.external.enabled`                      | For enabling external mongo database integration with Lighthouse controller | `false`           |
| `db.mongo.external.uri`                          | External mongodb connection string                                          | `""`              |
| `db.mongo.external.databaseName`                 | External mongodb database name for lighthouse                               | `""`              |

### Lighthouse default user parameters

| Name            | Description                      | Value                 |
|-----------------|----------------------------------|-----------------------|
| `user.email`    | Lighthouse default user email    | `"admin@default.com"` |
| `user.password` | Lighthouse default user password | `"admin123`           |


### Lighthouse configuration parameters

| Name                                          | Description                                                   | Value   |
|-----------------------------------------------|---------------------------------------------------------------|---------|
| `config.controller.grpc.host`                 | Lighthouse controller grpc server host                        | `""`    |
| `config.controller.grpc.tls.enabled`          | Lighthouse controller grpc server TLS                         | `false` |
| `config.controller.grpc.tls.skipVerification` | Lighthouse controller grpc server TLS skip verification check | `true`  |
| `config.controller.grpc.tls.ca`               | Lighthouse controller grpc server TLS custom ca               | `""`    |

### Lighthouse authentication parameters

| Name         | Description                                        | Value   |
|--------------|----------------------------------------------------|---------|
| `auth.token` | Auth token for connecting to Lighthouse Controller | `""`    |

### Lighthouse ingress parameters

| Name                       | Description                                                                                                                        | Value                      |
|----------------------------|------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
| `ingress.enabled`          | Enables the creation of an ingress for Lighthouse controller http server                                                           | `false`                    |
| `ingress.apiVersion`       | Ingress API version for Lighthouse controller http server                                                                          | `""`                       |
| `ingress.hostname`         | Ingress hostname for the Lighthouse http server ingress                                                                            | `""`                       |
| `ingress.annotations`      | Annotations for the Lighthouse http server ingress. To enable certificate autogeneration, place here your cert-manager annotations | `{}`                       |
| `ingress.ingressClassName` | IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)                                                      | `""`                       |
| `ingress.pathType`         | Path type for the Lighthouse http server ingress                                                                                   | `"ImplementationSpecific"` |
| `ingress.tls.enabled`      | Enable TLS for the Lighthouse http server ingress                                                                                  | `false`                    |
| `ingress.tls.secretName`   | TLS secret name consisting `tls.crt`, `tls.key` and `ca.crt`(if needed)                                                            | `""`                       |
| `ingress.tls.crt`          | TLS certificate for ingress                                                                                                        | `""`                       |
| `ingress.tls.key`          | TLS certificate private key for ingress                                                                                            | `""`                       |
| `ingress.tls.ca`           | TLS custom certificate authority for ingress                                                                                       | `""`                       |

### Lighthouse gRPC ingress parameters

| Name                           | Description                                                                                                                                                                          | Value                      |
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
| `ingressGrpc.enabled`          | Enables the creation of an ingress for Lighthouse controller gRPC server                                                                                                             | `false`                    |
| `ingressGrpc.apiVersion`       | Ingress API version for Lighthouse controller gRPC server                                                                                                                            | `""`                       |
| `ingressGrpc.hostname`         | Ingress hostname for the Lighthouse gRPC server ingress                                                                                                                              | `""`                       |
| `ingressGrpc.annotations`      | Annotations for the Lighthouse gRPC server ingress. To enable gRPC support, place gRPC annotation and to enable certificate autogeneration, place here your cert-manager annotations | `{}`                       |
| `ingressGrpc.ingressClassName` | IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)                                                                                                        | `""`                       |
| `ingressGrpc.pathType`         | Path type for the Lighthouse gRPC server ingress                                                                                                                                     | `"ImplementationSpecific"` |
| `ingressGrpc.tls.enabled`      | Enable TLS for the Lighthouse gRPC server ingress                                                                                                                                    | `false`                    |
| `ingressGrpc.tls.secretName`   | TLS secret name consisting `tls.crt`, `tls.key` and `ca.crt`(if needed)                                                                                                              | `""`                       |
| `ingressGrpc.tls.crt`          | TLS certificate for gRPC ingress                                                                                                                                                     | `""`                       |
| `ingressGrpc.tls.key`          | TLS certificate private key for gRPC ingress                                                                                                                                         | `""`                       |
| `ingressGrpc.tls.ca`           | TLS custom certificate authority for gRPC ingress                                                                                                                                    | `""`                       |

## Uninstalling the Lighthouse

To uninstall/delete the `my-release` deployment from namespace `my-namespace`:

```
helm delete my-release --namespace my-namespace
```

> **Note:** 
>> This command will delete all the resources deployed under the release. If the release was installed
>> with `controller.enabled=true` and `agent.enabled=true`, 
>> then after the completion of helm uninstallation process, you need to manually delete the generated agent auth secret in the
>> same namespace (secret name having "-agent-auth-secret" as suffix).
> 
>> If the release was created with `controller.enabled=true` and you have provided any external database with `db.mongo.external.enabled=true`,
> as this chart will create a database, you need to delete the PVC after the completion of helm uninstallation process.